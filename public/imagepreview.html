<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>imagePreview</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- Favicons -->
    <link href="../assets/img/favicon.png" rel="icon" />
    <link href="../assets/img/apple-touch-icon.png" rel="apple-touch-icon" />

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Dosis:300,400,500,,600,700,700i|Lato:300,300i,400,400i,700,700i"
        rel="stylesheet" />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />
    <link href="assets/css/fa.css" rel="stylesheet" />
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
    <link href="assets/css/login.css" rel="stylesheet" />
    <link href="assets/css/imageview.css" rel="stylesheet"/>

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />
</head>

<body>
    <!-- ======= Image Section ======= -->
    <section id="content" class="vh-100 content">
        <div class="pt-2 pb-5 h-100">
            <div class="px-3 navigation-icons">
                <a href="CommunityJournal.html"><i class="fas fa-chevron-left"></i></a>
                <a><i class="fas fa-share-alt" style="float: right;"></i></a>
            </div>
            <div class="d-flex flex-column align-items-center h-100">
                <div class="col-12 col-md-12 col-lg-12 col-xl-12 pt-5 ">
                    <div class="text-black text-center pb-5 mb-5">
                        <div class="image-container justify-content-center my-3">
                            <img id='img'>
                        </div>

                    </div>
                    <div class="container caption my-5">
                        <h4 id="title">TITLE</h1>
                        <p id="caption">
                        test
                    </p>    
                    </div>
                </div>
               
            </div>
           
        </div>
        </div>
    </section>
    <!-- End Image -->

    <main id="main"></main>
    <!-- End #main -->


    <!-- Vendor JS Files -->
    <script src="assets/vendor/purecounter/purecounter.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="assets/vendor/php-email-form/validate.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>

    <script type="module">
        var queryString = decodeURIComponent(window.location.search);
        queryString = queryString.substring(1);
        import {
            initializeApp
        } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-app.js'
        import { 
            getDatabase, ref, child, get
        } from 'https://www.gstatic.com/firebasejs/9.6.3/firebase-database.js'

        const firebaseConfig = {
            apiKey: "AIzaSyAiWhsurmpe0XHv5fT6woKqY6hURnd4Kno",
            authDomain: "fypj-f74df.firebaseapp.com",
            databaseURL: "https://fypj-f74df-default-rtdb.asia-southeast1.firebasedatabase.app",
            storageBucket: "fypj-f74df.appspot.com",
        };
        const firebaseApp = initializeApp(firebaseConfig);

        const dbRef = ref(getDatabase());
        var title = document.getElementById('title');
        var caption = document.getElementById('caption');
        get(child(dbRef, 'UploadRequests/' + queryString)).then((snapshot) => {
            if(snapshot.exists()){
                var data = snapshot.val();
                console.log(data)
                document.getElementById('img').src = data.image;
                title.innerText = data.title;
                caption.innerText = data.caption;

            }
        })

    </script>
</body>

</html>